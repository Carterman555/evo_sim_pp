import pygame
from zoomer import Zoomer
from constants import *

from shapely.geometry import Point
from shapely.geometry import box
from shapely.geometry.polygon import Polygon

class Environment:

    polygon = [
            (-1820, 485),(-1510, 479),(-1435, 617),(-1559, 814),(-1614, 702),
            (-1770, 610),(-1774, 830),(-1670, 1127),(-1704, 1392),(-1480, 1607),
            (-1365, 1435),(-1494, 1187),(-1479, 1057),(-1290, 1014),(-1114, 1310),
            (-1124, 1634),(-1304, 1819),(-1600, 1952),(-1694, 2194),(-1419, 2330),
            (-1117, 2170),(-847, 1854),(-783, 1534),(-803, 1169),(-493, 1184),
            (-103, 1634),(-533, 2144),(-1623, 2629),(-1513, 2789),(-1313, 2764),
            (-698, 2609),(-573, 2764),(-263, 2789),(571, 2794),(1111, 2744),
            (1096, 2594),(471, 2409),(41, 2459),(-313, 2454),(356, 2054),
            (871, 2074),(1386, 2349),(1566, 2639),(1921, 2769),(2081, 2409),
            (1821, 2169),(1466, 1879),(1261, 1514),(1826, 1414),(1826, 1609),
            (1726, 1839),(2001, 2184),(2366, 2469),(2121, 2699),(2616, 2789),
            (2941, 2624),(2921, 2269),(2691, 2184),(2861, 1849),(2961, 1464),
            (3026, 969),(2956, 654),(2746, 544),(2871, 209),(2981, -160),
            (2946, -475),(2721, -505),(2426, -195),(2401, 304),(1971, 284),
            (1931, 659),(2301, 879),(2576, 1289),(2461, 1814),(2011, 1244),
            (1636, 889),(1644, 368),(1874, -141),(2391, -548),(2391, -548),
            (2597, -955),(2241, -1395),(2644, -1598),(3054, -1365),(3027, -2045),
            (1977, -2011),(1587, -1541),(1671, -1068),(1387, -771),(691, -1078),
            (904, -1558),(1084, -1235),(1361, -1131),(1457, -1325),(1467, -1635),
            (1644, -1835),(1131, -2008),(481, -1981),(-1385, -1948),(-1398, -1561),
            (-985, -1591),(-638, -1671),(-215, -1671),(-48, -1428),(-78, -1181),
            (-265, -961),(-618, -1011),(-642, -1185),(-368, -1308),(-478, -1451),
            (-635, -1611),(-1732, -1315),(-1622, -755),(-1143, -570),(-713, -270),
            (-863, 59),(-1283, 19),(-1273, -310),(-1608, -395),(-1678, -70)
        ]


    @staticmethod
    def point_in_env(point):
        polygon = Polygon(Environment.polygon)
        return polygon.contains(Point(point))
    
    @staticmethod
    def rect_in_env(rect: pygame.rect):
        s_rect = box(rect.left, rect.top, rect.right, rect.bottom)
        polygon = Polygon(Environment.polygon)
        return polygon.contains(s_rect)


    @staticmethod
    def draw():

        Zoomer.draw_rect(WORLD_BOUNDS, '#85B889')
        
        Zoomer.draw_polygon(Environment.polygon, (50,160,60,255))